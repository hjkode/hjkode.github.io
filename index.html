<!DOCTYPE html>
<html>
<head>
    <title>Simple Code</title>
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <div class="simple">"Let's keep simple things simple"</div>
</head>
<body>
<main class="container">

    <article>
        <header>
            <h1>Python: Understanding Deadlock in Asynchronous Programming</h1>
            <div class="date">August 7, 2018</div>
        </header>
        <div class="rborder">
            <div>
                <p>
                    Starting from Python 3.5, writing an asynchronous program became much more intuitive with two new
                    keywords namely <b>async</b> and <b>await</b>. Still, grasping the concept of Python asynchronous
                    programming can be difficult and confusing, especially when working with a critical section.
                </p>
                <p>
                    Here I will show you one example how a deadlock can occur with two coroutines and one lock.
                </p>

                <p>
                    In multi-threaded programming, a simple deadlock situation is where two actors waiting for each
                    other to lease the lock hold by another actor thus neither of them can do anything. (two locks and two actors are involved here)
                    However, a deadlock can occur with just one lock in Python asynchronous programming.
                </p>
                <div class="highlight"><pre><span></span><span class="n">async</span> <span class="k">def</span> <span class="nf">co1</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">_LOCK</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">some_task</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">co2</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">_LOCK</span><span class="p">:</span>
        <span class="c1"># ...</span>
</pre></div>
                <p>
                    Let's assume <b>co1</b> coroutine first gets started. <b>co1</b> acquires the lock and execute the await line. At
                    this point, the control of <b>co1</b> is passed to the event loop thus <b>co2</b> coroutine starts. Note that <b>co1</b>
                    hasn't release the lock! Now <b>co2</b> coroutine tries to acquire the lock but it is hold by <b>co1</b> coroutine
                    which is waiting for the control from <b>co2</b> coroutine. When this happens, your program will hang.
                </p>
                <p>
                    One obvious solution is to avoid the pattern from the example - Don't call coroutines inside a lock.
                    Giving a timeout to the lock can mitigate a deadlock but this could hide the root cause and make
                    debugging more difficult.
                </p>

            </div>
        </div>

    </article>

    <article>
        <header>
            <h1>Python: * and ** Syntactic Rules</h1>
            <div class="date">July 24, 2018</div>
        </header>
        <div class="rborder">
            <div>
                <p>
                    Single * in a function definition means the function can take an arbitary number of arguments.
                </p>
                <div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

<span class="n">func</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">)</span>
</pre></div>
                <p>
                    Similarly, double ** in a function definition means the function can take an arbitary number of
                    'keyworded arguments'
                </p>

<div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">func2</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">key</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

<span class="n">func2</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;211&#39;</span><span class="p">,</span> <span class="n">company</span><span class="o">=</span><span class="s1">&#39;helloworld&#39;</span><span class="p">)</span>
</pre></div>
                <p>
                    If double ** is used to call a function, it means 'unpacking' the argument.
                </p>

                <div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">func3</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>

<span class="n">func3</span><span class="p">(</span><span class="o">**</span><span class="n">my_dict</span><span class="p">)</span>
                </pre>
                </div>

                <p>
                    What about single * when calling a function? Quite similar. Look at the next example.
                </p>

                <div class="highlight"><pre><span></span>
<span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;332&#39;</span><span class="p">,</span> <span class="s1">&#39;john&#39;</span><span class="p">)</span>

<span class="n">func3</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</pre></div>
            </div>
        </div>

    </article>

    <article>
        <header>
            <h1>Python: Using Virtual Environment in Ubuntu</h1>
            <div class="date">July 19, 2018</div>
        </header>
        <div class="rborder">
            <div>
                <p>
                    When working on Python projects, it is common to have problems caused by a mis-match between
                    installed packages or wrong versions of packages. Using Python virtual environment can easily solve
                    this problem.
                </p>
                <p>How?</p>
                <p>
                    Since each virtual environment is totally isolated from others, installing whatever version of
                    packages in one environment won't be affected by packages already installed in other environments.
                </p>

                <p>
                    Firstly, install virtualenv if it is not installed.
                <div class="code">
                    pip install virtualenv
                </div>
                </p>
                <p>
                    Go to the project folder you want to use a virtual environment then create a new
                    virtual environment. Here, we are creating one named <b>myenv</b>.
                <div class="code">
                    jj@jj-ubuntu:~g/myprject$ <b>virtualenv myenv</b>
                </div>
                </p>
                <p>
                    Now you need to activate it by using source command.
                    <div class="code">
                        jj@jj-ubuntu:~g/myprject$ <b>. myenv/bin/activate</b>
                    </div>
                </p>
                <p>
                    To stop using the virtual environment, simply run deactivate.
                    <div class="code">
                        jj@jj-ubuntu:~g/myprject$ <b>deactivate</b>
                    </div>
                </p>

            </div>
        </div>

    </article>

    <article>
        <header>
            <h1>Python: Basics of requirements.txt</h1>
            <div class="date">June 8, 2018</div>
        </header>
        <div class="rborder">
            <div>
                <p>
                    This short post explains the (very) basic of <b>requirements.txt.</b>
                </p>

                <p>
                    One way to manage project dependencies is using a file named 'requirements.txt'. It basically
                    contains a list of packages to install. How to use it?
                    <div class="code">
                        pip install -r requirements.txt
                    </div>
                </p>
                <p>
                    In requirements file(s), you also can specify the version of those packages. For instance,
                    <div class="code">
                    NiceFramework == 0.1.2<br/>
                    AnotherLibrary >= 0.2.2
                    </div>
                </p>
                <p>
                    Another good thing about requirement files is that it is also supported by Pycharm which is a great
                    Python IDE (& free for Community version). Simply add 'requirements.txt' to the project. If Pycharm
                    finds packages in the list are not satisfied, it will let you know and give you an option to install
                    them.

                </p>

            </div>
        </div>

    </article>

    <article>
        <div class="rborder">
            <div class="date">May 9, 2018</div>
            <div>
                <h1>Useful Resources for Understanding Certificates </h1>

                <p>
                    Here is a list of useful web links summarizing some topics about certificates.
                </p>

                <p>
                    <ul class="steps">
                        <li>
                            <a href="https://support.ssl.com/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them">DER vs. CRT vs. CER vs. PEM Certificates and How To Convert Them</a>
                        <li>
                            <a href="http://www.beginninglinux.com/home/server-administration/openssh-keys-certificates-authentication-pem-pub-crt">Authentication without password using OpenSSH Key, certificates .pem and .pub</a>
                        </li>
                        <li>
                            <a href="http://www.differencebetween.net/technology/difference-between-ssh-and-ssl/">Difference between SSH and SSL</a>
                        </li>
                    </ul>
                </p>
                <p>

                </p>

            </div>
        </div>

    </article>

    <article>
        <div class="rborder">
            <div class="date">Apr 16, 2018</div>
            <div>
                <h1>Running Ubuntu on Windows with VirtualBox</h1>

                <p>
                    Why VirtualBox? Because it works well, it is easy to use and free. I think it's more than enough for
                    personal use. Here is a brief summary of how to install Ubuntu on Windows using VirutalBox.
                </p>

                <p>
                    <b>Steps</b>
                <ul class="steps">
                    <li>Step 1: Download and install VirtualBox from <a
                            href="https://www.virtualbox.org/">VirtualBox</a>
                    </li>
                    <br/>
                    <li>Step 2: Download Ubuntu Desktop from <a href="https://www.ubuntu.com">Ubuntu</a></li>
                    <br/>
                    <li>Step 3: Creating a Ubuntu VM
                        <ul>
                            <li>3.1: Create a new machine using <b>New</b>. Choose <b>Linux</b> type and <b>Ubuntu</b>
                                version.
                            </li>
                            <li>3.2: Proceed with default options.</li>
                            <li>3.3: From <b>Machine Tools</b>, select <b>Details</b>.</li>
                            <li>3.4: Go to <b>Storage</b>.</li>
                            <li>3.5: Select Empty disk symbol under <b>Storage Devices</b>.</li>
                            <li>3.6: Click the disk symbol next to <b>Optical Drive</b> under <b>Attributes</b> then
                                select
                                the Ubuntu iso file.
                            </li>
                            <li>3.7: Start the VM and follow installation steps.</li>
                        </ul>
                    </li>
                    <br/>
                    <li>
                        Step 4: Configuring the VM. Without this, it may perform too sluggish.
                        <ul>
                            <li>4.1: Click <b>System</b> from <b>Machine Tools </b>in VirtualBox Manager</li>
                            <li>4.2: Increase the base memory to 4GB (or higher)</li>
                            <li>4.3: Set 4 processors under the <b>Processor</b> tab</li>
                            <li>4.4: Under <b>Display</b> tick <b>Enable 3D Acceleration</b> and adjust <b>Video
                                Memory</b>
                                to 128MB.
                            </li>
                        </ul>
                    </li>
                    <br/>
                    <li>
                        Step 5: Run <b>VBox_GAs</b> (VirtualBox Guest Additions) in Ubuntu. These are device drivers and
                        for
                        system
                        optimization. In the Ubuntu main screen, open the disk symbol on the left side then click <b>Run
                        Software</b>.
                    </li>
                </ul>
                </p>
                <p>
                    Lastly, it might be a good idea to make a <i>base</i> snapshot before using the VM. That's it!
                </p>

            </div>
        </div>

    </article>

    <!-- Python: Simple sub-parser example-->
    <article>
        <div class="rborder">
            <div class="date">April 13, 2018</div>
            <div class="blurb">
                <h1>Python: Simple sub-parser example</h1>

                <p>
                    Using <b>argparse</b>, you can make your application run as if it works in different option modes.
                    In other words, if your application provides two (or more) different sets of types of options such
                    as
                    <i>standard</i> and <i>advanced</i> modes, and each mode has a set of options, you can use
                    sub-parsers
                    available from <b>argparse</b> for that purpose.
                </p>

                <p>
                    The below example demonstrates how to use the sub-parsers.
                </p>

                <div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="c1"># Usage example</span>
<span class="c1">#</span>
<span class="c1"># my_app std -i apple</span>
<span class="c1"># my_app adv -c car</span>
<span class="c1"># my_app adv -v spaceship</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span
                            class="n">ArgumentParser</span><span class="p">(</span><span
                            class="n">description</span><span
                            class="o">=</span><span
                            class="s1">&#39;Run this app in simple or advanced modes&#39;</span><span class="p">)</span>
    <span class="n">sub_parser</span> <span class="o">=</span> <span class="n">parser</span><span
                            class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span
                            class="n">help</span><span
                            class="o">=</span><span class="s1">&#39;Use simple or advanced mode&#39;</span><span
                            class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;user_mode&#39;</span><span
                            class="p">)</span>

    <span class="n">simple_parser</span> <span class="o">=</span> <span class="n">sub_parser</span><span
                            class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;std&#39;</span><span
                            class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Provide options for beginners&#39;</span><span
                            class="p">)</span>
    <span class="n">simple_parser</span><span class="o">.</span><span class="n">add_argument</span><span
                            class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span
                            class="s1">&#39;--info&#39;</span><span
                            class="p">,</span>
                               <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Print some information&#39;</span><span
                            class="p">,</span>
                               <span class="n">action</span><span class="o">=</span><span
                            class="s1">&#39;store&#39;</span><span class="p">,</span>
                               <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;info&#39;</span><span
                            class="p">)</span>

    <span class="n">advanced_parser</span> <span class="o">=</span> <span class="n">sub_parser</span><span
                            class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;adv&#39;</span><span
                            class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Provide options for advanced users&#39;</span><span
                            class="p">)</span>
    <span class="n">advanced_parser</span><span class="o">.</span><span class="n">add_argument</span><span
                            class="p">(</span><span class="s1">&#39;-c&#39;</span><span class="p">,</span> <span
                            class="s1">&#39;--complex&#39;</span><span
                            class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Perform some complex action&#39;</span><span
                            class="p">,</span>
                                 <span class="n">action</span><span class="o">=</span><span
                            class="s1">&#39;store&#39;</span><span class="p">,</span>
                                 <span class="n">dest</span><span class="o">=</span><span
                            class="s1">&#39;complex&#39;</span><span class="p">)</span>
    <span class="n">advanced_parser</span><span class="o">.</span><span class="n">add_argument</span><span
                            class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span
                            class="s1">&#39;--very-complex&#39;</span><span
                            class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Perform even more complex action&#39;</span><span
                            class="p">,</span>
                                 <span class="n">action</span><span class="o">=</span><span
                            class="s1">&#39;store&#39;</span><span class="p">,</span>
                                 <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;super-complex&#39;</span><span
                            class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span
                            class="n">parse_args</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">user_mode</span> <span
                            class="o">==</span> <span class="s1">&#39;std&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span
                            class="n">user_mode</span> <span class="o">==</span> <span
                            class="s1">&#39;adv&#39;</span><span
                            class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">print_usage</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span
                            class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre>
                </div>
            </div>
        </div>

    </article>

    <!-- Python: Simple argparse example -->
    <article>
        <div class="rborder">
            <div class="date">April 11, 2018</div>
            <div class="blurb">
                <h1>Python: Simple argparse example</h1>

                <p>
                    This is a trivial <b>argparse</b> example showing how to take one positional (thus, mandatory) input
                    and one optional argument. Let's imagine you are writing a code-to-html converter (well,
                    <b>Pygments</b>
                    is
                    there for you just in case you are about to write one). It must take one mandatory input which is
                    the
                    file from which it converts and one option for language in which the code is written.
                </p>

                <div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="c1"># Usage example</span>
<span class="c1">#</span>
<span class="c1"># C:\code2html -h</span>
<span class="c1"># C:\code2html mycode.py --lang python</span>
<span class="c1"># C:\code2html mycode.cpp</span>
<span class="c1"># C:\code2html =&gt; cod2html: error: the following arguments are required: input_file</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span
                            class="n">ArgumentParser</span><span class="p">(</span><span
                            class="n">description</span><span
                            class="o">=</span><span
                            class="s1">&#39;Simple parser running understanding two options&#39;</span><span
                            class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span
                            class="p">(</span><span class="s1">&#39;input_file&#39;</span><span class="p">,</span> <span
                            class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span
                            class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The code file to convert to HTML&#39;</span><span
                            class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span
                            class="p">(</span><span class="s1">&#39;-l&#39;</span><span class="p">,</span> <span
                            class="s1">&#39;--lang&#39;</span><span
                            class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span
                            class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;C++&#39;</span><span
                            class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;lang&#39;</span><span
                            class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Choose the language of the code to convert to HTML. Default is C++&#39;</span><span
                            class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span
                            class="n">parse_args</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span
                            class="n">input_file</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span
                            class="n">lang</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span
                            class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre>
                </div>

            </div>
        </div>
    </article>

    <!-- Supporting Python CLI-->
    <article>
        <div class="rborder">
            <div class="date">April 8, 2018</div>
            <div class="blurb">
                <h1>Supporting Python CLI</h1>

                <p>
                    Here is a concise (hopefully) example showing how to make a Python package and run it like an
                    executable
                    file on the
                    command line using '<b>entry_points</b>' from <b>setuptools</b>. In this example, I deliberately
                    used
                    different names
                    for files and '<b>console_scripts</b>' to make it clear which name is for what.
                </p>

                <p>
                    Once you have installed the example using '<b>pip install -e .</b>', you can run it on the command
                    line
                    by
                    using the name described in '<b>console_scripts</b>'. e.g.) C:\hjkode
                </p>

                <p>
                    <i>Project folder structure</i>
            <pre class="code">
    my_project_package
        my_project
            __init__.py
            __main__.py
        setup.py
        </pre>
                </p>

                <p>
                    <i>__main__.py</i>

                <div class="highlight"><pre><span></span>    <span class="k">def</span> <span
                        class="nf">main</span><span
                        class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Running the main routine&quot;</span><span
                            class="p">)</span>
        <span class="c1"># Do something interesting!</span>
        <span class="c1"># Use argparse to support CLI commands</span>

    <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span
                            class="p">:</span>
        <span class="n">main</span><span class="p">()</span>
</pre>
                </div>
                </p>

                <p>
                    <i>setup.py</i>

                <div class="highlight"><pre>
    <span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span
                        class="n">setup</span>

    <span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span
                        class="s1">&#39;hjkode-project&#39;</span><span class="p">,</span>   <span class="c1"># [Mandatory] This is the name you get from running &#39;pip list&#39;</span>
          <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1.0&#39;</span><span
                        class="p">,</span>         <span class="c1"># [Mandatory]</span>
          <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;my_project&#39;</span><span
                        class="p">],</span> <span class="c1"># [Mandatory] Source code location</span>
          <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>           <span
                        class="c1"># Use this to run the module on the command line after installation. e.g) C:\hjkode</span>
              <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
                  <span class="s1">&#39;hjkode = my_project.__main__:main&#39;</span>
              <span class="p">]</span>
          <span class="p">},</span>
          <span class="p">)</span>
</pre>
                </div>
                </p>

                <div class="reference">
                    References
                    <ul class="references">
                        <li>
                            <a href="https://python-packaging.readthedocs.io/en/latest/">How to Package Your Python
                                Code</a>
                        </li>
                        <li>
                            <a href="https://chriswarrick.com/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">Python
                                Apps the Right Way: Entry points and scripts</a>
                        </li>
                    </ul>
                </div>

            </div>
        </div>
    </article>

    <!-- Running a simple daemon on Windows with Python-->
    <article>
        <div class="rborder">
            <div class="date">March 30, 2018</div>
            <div class="blurb">
                <h1>Running a simple Python daemon on Windows using schtasks</h1>

                <p>
                    Prepare a Python script running a loop which performs periodic tasks such as checking Windows event
                    store for a specific type of events or monitoring a folder if there is a new file dropped.
                </p>

                <p>
                    To run the script as a background process, you can use Windows scheduled tasks. The following
                    Windows
                    commands will create (and override already existing one) and run a new task named
                    <b>MyPythonDaemon</b>
                    from <b>C:\Exp\daemon.py</b>.

                <pre class="code">
<b>schtasks</b> /Create /TN MyPythonDaemon /SC onstart /F /RU system /TR "'C:\Users\hjkode\AppData\Local\Programs\Python\Python36-32\python.exe' 'C:\Exp\daemon.py'"
<b>schtasks</b> /Run /TN MyPythonDaemon
                </pre>
                </p>
                <p>
                    Note that /TR (taskrun) value has been grouped in "" and its members are wrapped in '' each.
                </p>

                <div class="reference">
                    Reference
                    <ul class="references">
                        <li>
                            <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/bb736357(v=vs.85).aspx">MSDN:
                                Schtasks.exe</a>
                        </li>
                    </ul>
                </div>

            </div>
        </div>
    </article>

    <!-- Python ModuleNotFoundError-->
    <article>
        <div class="rborder">
            <div class="date">March 19, 2018</div>
            <div class="blurb">
                <h1>Python ModuleNotFoundError</h1>

                <p>
                    While I instantly began to like using Python for a new project, I often had to scratch my head why I
                    was
                    getting <b>ModuleNotFoundError</b> error when everything looked okay. (Of course there was a problem
                    or
                    two) This is
                    a list of debugging tips which I found useful to sort out the problem.
                </p>

                <p>
                    0. Have you installed your package? (For Python newbies) Just putting <b>__init__.py</b> every
                    folder in
                    your project does not magically make one script file to understand another script file somewhere.
                    You
                    need to
                    install your package first. Below will <i>install </i>the package, meaning the information about the
                    package will be known to
                    Python.

                <div class="code">
                    pip install package_name
                </div>

                </p>

                <p>
                    1. Check spelling typo. This sounds silly but happens. Check the package name to be imported.
                </p>

                <p>
                    2. Check <b>__init__.py</b> in the wrong place. As missing the file causes a problem in importing,
                    putting it
                    in the unintended folder (in my case it was the top project folder) also can cause an importing
                    error
                    because it will change the required importing path.
                </p>

                <p>
                    3. Print <b>sys.path</b> to see paths Python searches for. Is your project included in those paths?

                    </pre>
                </p>

                <div class="reference">
                    Some useful reading
                    <ul class="references">
                        <li>
                            <a href="https://python-packaging.readthedocs.io/en/latest/">How To Package Your Python
                                Code</a>
                        </li>

                        <li>
                            <a href="https://pythonhosted.org/an_example_pypi_project/setuptools.html">Getting Started
                                With
                                setuptools and setup.py</a>
                        </li>

                        <li>
                            <a href="https://docs.python.org/3/reference/import.html">The import system</a>
                        </li>
                    </ul>
                </div>

            </div>
        </div>
    </article>

    <!-- Some Git commands at work (today)-->
    <article>
        <div class="rborder">
            <div class="date">March 9, 2018</div>
            <div class="blurb">
                <h1>Some Git commands at work (today)</h1>

                <p>
                    If you don't have experience with Git at work, the following Git commands might give you an idea
                    what
                    you will be doing with Git on a normal working day. :)
                </p>

                <p>
                    Setting user name and email globally

                <div class="code">
                    <b>git config --global user.name</b> "John Doe"<br/>
                    <b>git config --global user.email</b> "johndoe20000@foo.com"
                </div>

                <p>Cloning a remote repository

                <div class="code">
                    <b>git clone </b>remote-repository
                </div>
                </p>

                <p>
                    Creating and checking out a branch

                <div class="code">
                    <b>git checkout -b</b> new-branch-name
                </div>
                </p>
                <p>
                    Deleting branches

                <div class="code">
                    <b>git branch -d</b> branch-name-to-be-deleted <br/>
                    <b>git push origin --delete</b> remote-branch-name-to-be-deleted
                </div>

                </p>

                </p>

                <p>
                    Comparing changes

                <div class="code">
                    <b>git diff</b> => diff unstaged files <br/>
                    <b>git show</b> => diff with last commit
                </div>

                </p>
                <p>
                    Undoing uncommitted changes locally

                <div class="code">
                    <b>git checkout -- .</b> => revert all files<br/>
                    <b>git checkout -- </b>file-name-to-undo => revert a specific file
                </div>

                </p>

                <p>
                    Displaying commit and branching history

                <div class="code">
                    <b>git log --graph</b>
                </div>

                </p>

                <p>
                    Storing and re-applying changes

                <div class="code">
                    <b>git stash</b><br/>
                    <b>git stash pop</b>
                </div>

                </p>

                <p>
                    Unstaging files

                <div class="code">
                    <b>git reset</b> staged-file-name
                </div>

                </p>

                <p>
                    Displaying local and remote branches

                <div class="code">
                    <b>git branch -v</b> <br/>
                    <b>git remote -v</b>
                </div>

                </p>

                <p>
                    Deleting untracked files

                <div class="code">
                    <b>git clean -f</b> => delete files<br/>
                    <B>git clean -n </B>=> display files that will be deleted<br/>
                    <B>git clean -f -d</B> => delete directories
                </div>

                </p>

                <p>
                    Tidying commit history (local)

                <div class="code">
                    <b>git rebase -i</b> hash-value-to-which-rebase
                </div>
                </p>
            </div>
        </div>
    </article>

    <!-- C++ _countof vs sizeof -->
    <article>
        <div class="rborder">
            <div class="date">March 2, 2018</div>
            <div class="blurb">
                <h1>C++ _countof vs sizeof </h1>

                <p>
                    <b>_countof</b> is a macro that computes the number of elements in an array. That task sounds quite
                    easy
                    with
                    <b>sizeof</b>, so why should I bother using another macro, I thought for a moment (only for a
                    moment).
                </p>

                <p>Firstly, using <b>_countof</b> is semantically clearer than <b>sizeof</b> if the intention of the
                    logic
                    is getting the number
                    of elements rather than the size of an array. Secondly, using <b>sizeof</b> for computing the
                    element
                    counts
                    could be sometimes confusing thus buggy. See the below example. Can you expect the correct output?
                    (Answer in the comment)
                </p>

                <p>

                <div class="highlight"><pre><span></span><span class="cp">#include</span> <span
                        class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">Foo</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
	<span class="n">Foo</span><span class="p">()</span> <span class="p">{}</span>
	<span class="n">Foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">data</span><span
                            class="p">,</span> <span class="kt">char</span> <span class="n">charData</span><span
                            class="p">)</span> <span class="o">:</span> <span class="n">numData_</span><span
                            class="p">(</span><span class="n">data</span><span class="p">),</span> <span
                            class="n">charData_</span><span class="p">(</span><span class="n">charData</span><span
                            class="p">)</span> <span class="p">{}</span>
<span class="k">private</span><span class="o">:</span>
	<span class="kt">int</span> <span class="n">numData_</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">charData_</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span
                            class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span
                            class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
	<span class="kt">char</span> <span class="n">charArray</span><span class="p">[</span><span class="mi">16</span><span
                            class="p">];</span>
	<span class="kt">wchar_t</span> <span class="n">wcharArray</span><span class="p">[</span><span
                            class="mi">16</span><span class="p">];</span>
	<span class="n">Foo</span> <span class="n">fooArray</span><span class="p">[</span><span class="mi">16</span><span
                            class="p">];</span>
	<span class="n">Foo</span><span class="o">*</span> <span class="n">fooPtrArray</span><span class="p">[</span><span
                            class="mi">16</span><span class="p">];</span>

	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span
                            class="n">_countof</span><span class="p">(</span><span class="n">charArray</span><span
                            class="p">)</span> <span class="o">&lt;&lt;</span> <span
                            class="s">&quot;, &quot;</span> <span
                            class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span
                            class="n">charArray</span><span
                            class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span
                            class="o">::</span><span class="n">endl</span><span class="p">;</span>     <span class="c1">// 16, 16</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span
                            class="n">_countof</span><span class="p">(</span><span class="n">wcharArray</span><span
                            class="p">)</span> <span class="o">&lt;&lt;</span> <span
                            class="s">&quot;, &quot;</span> <span
                            class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span
                            class="n">wcharArray</span><span
                            class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span
                            class="o">::</span><span class="n">endl</span><span class="p">;</span>   <span class="c1">// 16, 32</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span
                            class="n">_countof</span><span class="p">(</span><span class="n">fooArray</span><span
                            class="p">)</span> <span
                            class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span
                            class="o">&lt;&lt;</span> <span
                            class="k">sizeof</span><span class="p">(</span><span class="n">fooArray</span><span
                            class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span
                            class="o">::</span><span class="n">endl</span><span class="p">;</span>       <span
                            class="c1">// 16, 128</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span
                            class="n">_countof</span><span class="p">(</span><span class="n">fooPtrArray</span><span
                            class="p">)</span> <span class="o">&lt;&lt;</span> <span
                            class="s">&quot;, &quot;</span> <span
                            class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span
                            class="n">fooPtrArray</span><span
                            class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span
                            class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="c1">// 16, 64 (x86) and 16, 128 (x64)</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre>
                </div>
                </p>
                <p>
                    It's actually not too difficult to get the correct answer. But it also seems quite easy to make a
                    mistake when using with <b>sizeof</b> for computing the number of elements of an array.
                </p>
            </div>
        </div>
    </article>

    <!-- C++ Regular Expression For File Path -->
    <article>
        <div class="rborder">
            <div class="date">February 28, 2018</div>
            <div class="blurb">
                <h1>C++ Regular Expression For File Path</h1>

                <p>
                    How do I turn a file path into a C++ regular expression? Once I had to answer this question to check
                    if
                    a file path is in or under a certain folder.
                </p>

                <p>
                    In C++ you need two backslashes for '\' in string. In regular expression, '\' is used for special
                    characters. That means, you need four backslash per each '\' in the regular expression to match a
                    C++
                    file path. Because a colon (':') is also a special letter in regular expression you need to add two
                    backslashes in front of it.

                <div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span
                        class="n">string</span> <span
                        class="n">myFilePath</span> <span class="o">=</span> <span class="s">&quot;C:</span><span
                        class="se">\\</span><span class="s">Program Files</span><span class="se">\\</span><span
                        class="s">TestFolder</span><span
                        class="se">\\</span><span class="s">MyTestApp.exe&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">regex</span> <span class="n">re</span><span
                            class="p">(</span><span class="s">&quot;C</span><span class="se">\\</span><span
                            class="s">:</span><span class="se">\\\\</span><span class="s">Program Files</span><span
                            class="se">\\\\</span><span class="s">&quot;</span><span class="p">,</span> <span
                            class="n">std</span><span class="o">::</span><span class="n">regex_constants</span><span
                            class="o">::</span><span class="n">icase</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">smatch</span> <span class="n">matchResult</span><span
                            class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">regex_search</span><span
                            class="p">(</span><span class="n">myFilePath</span><span class="p">,</span> <span class="n">matchResult</span><span
                            class="p">,</span> <span class="n">re</span><span class="p">))</span>
<span class="p">{</span>
	<span class="c1">// Found a match</span>
<span class="p">}</span>
</pre>
                </div>
                </p>
                <p>
                    Note <b>std::regex_constants::icase</b> option is passed for case in-sensitive search when creating
                    the
                    regex
                    instance. For case sensitive match, simply omit the second parameter.
                </p>
            </div>
        </div>
    </article>
    <!--Wow64, SysWow64 and Wow6432node -->
    <article>
        <div class="rborder">
            <div class="date">February 26, 2018</div>
            <div class="blurb">
                <h1>Wow64, SysWoW64 and Wow6432node</h1>

                <p>
                    I found understanding those concepts <i>altogether</i> is more effective for consolidating my
                    understanding (&
                    memorising) than looking at each of them separately.
                </p>

                <p>
                    <b>WoW64</b><br/>
                    First of all, WoW64 means Windows 32-bit on Windows 64-bit. In MSDN, WOW64 also means the emulator
                    which allows 32-bit applications to run on 64-bit OS.
                </p>

                <p>
                    <b>SysWow64</b><br/>
                    A 32-bit Windows OS has one Windows system folder named <b>System32</b>. On a 64-bit Windows OS
                    however
                    there are
                    two Windows system folders . <b>System32</b> for 64-bit files and <b>SysWOW64</b> for 32-bit files.
                    Whenever 32-bit
                    applications try to access <b>%windir%\System32</b> it is redirected to <b>%windir%\SysWOW64</b>.
                </p>

                <p>
                    <b>Wow6432node</b><br/>
                    Similarly, to provide a separate view for a 32-bit application running a 64-bit OS, there is the
                    registry key named <b>Wow6432node</b> under <b>HKEY_LOCAL_MACHINE\Software</b> on a 64-bit
                    Windows OS. This registry key provides a view of <b>HKEY_LOCAL_MACHINE\SOFTWARE</b> for 32-bit
                    applications. (Interestingly the registry key often appears on 32-bit Windows OS. While confusing,
                    you
                    can simply ignore it.)
                </p>

                <p>
                    While the default access rule says, a 32-bit application running WOW64 (the emulator) accesses the
                    32-bit registry view and a 64-bit application access the 64-bit registry key, you can use the
                    following
                    flags to change the access rule when using them with Windows APIs.

                <table>
                    <tr>
                        <th>Flag name</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <th>KEY_WOW64_64KEY</th>
                        <th>Access a 64-bit key from either a 32-bit or 64-bit application</th>
                    </tr>
                    <tr>
                        <th>KEY_WOW64_32KEY</th>
                        <th>Access a 32-bit key from either a 32-bit or 64-bit application</th>
                    </tr>
                </table>
                </p>
            </div>
            <div class="reference">
                References
                <ul class="references">
                    <li>
                        <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa384129(v=vs.85).aspx">MSDN:
                            Accessing an
                            Alternate Registry View</a>
                    </li>

                    <li>
                        <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa384187(v=vs.85).aspx">MSDN:
                            File
                            System Redirector</a>
                    </li>
                </ul>
            </div>
        </div>

    </article>
    <!--Building Boost Library For Windows-->
    <article>
        <div class="rborder">
            <div class="date">February 25, 2018</div>
            <div class="blurb">
                <h1>Building boost library for Windows</h1>

                <p>
                    It is supposed to be pretty straightforward. But whenever I needed a specific set of boost libraries
                    it
                    took longer than expected. Basically there are just three
                    steps for building boost library for Windows.<br/>

                <ul class="steps">
                    <li>Step 1: Download a boost library zip file and unzip</li>
                    <li>Step 2: Generate the boost build tool (b2.exe)</li>
                    <li>Step 3: Using the build tool, build a version of boost library</li>
                </ul>

                <p>
                    <b>Step 1</b>
                    Download boost library from <a href="http://www.boost.org/users/download/">Boost page</a>.<br/>
                    While optional, it is a good practice to check the hash value of the file. For instance, use
                    <b>CertUtil.exe</b> to calculate the hash value of the downloaded zip file and compare it with
                    the one from the boost download page.

                <div class="code">C:\Users\hjkode\CertUtil -hashfile .\Downloads\boost_1_66_0.zip SHA256</div>

                </p>
                <p>
                    <b>Step 2</b>
                    Unzip it and run <b>bootstrap.bat</b> to create the build tool. This will generate <b>b2.exe</b>.
                </p>

                <p>
                    <b>Step 3</b>
                    Run <b>b2.exe</b> with options to create correct version(s) of boost libraries. Without any
                    option, running <b>b2.exe</b> will generate all variants of boost libraries with default options and
                    this could take a quite long time. Below shows an example of building a 32-bit release version of
                    boost
                    libraries.

                <div class="code">
                    C:\b2 toolset=msvc-14.1 -j4 --build-dir="C:\Users\hjkyod\Documents\dev\boost-build" address-model=32
                    architecture=x86 --build-type=minimal stage --stagedir=stage/win32
                </div>
                <div class="explanation">
                    <b>toolset:</b> Compiler version e.g.) msvc-14.1 for Visual Studio 17<br/>
                    <b>-j4:</b> Number cores to run in parallel e.g.) 4<br/>
                    <b>--build-dir:</b> Build directory<br/>
                    <b>address-model:</b> Either 32-bit or 64-bit code generation<br/>
                    <b>architecture:</b> Process architecture<br/>
                    <b>--build-type</b>: Determines which build types of the libraries are created. <b>minimal</b>
                    option
                    means release builds.<br/>
                    <b>stage:</b> Request output files to be copied to <b>stage</b> folder<br/>
                    <b>stagedir:</b> Stage folder<br/>
                </div>
                <p>
                    For the full list of options, see <a
                        href="http://www.boost.org/build/doc/html/bbv2/overview/invocation.html">here</a>.
                </p>

            </div>
        </div>
    </article>
    <!--New Chapter-->
    <article>
        <div class="rborder">
            <div class="date">February 22, 2018</div>
            <div class="blurb">
                <h1>New chapter</h1>

                <p>
                    This is a blog to share tips and knowledge gained from my side projects. I tried something similar,
                    at least twice in the past but it didn't last long. It was perhaps because I was putting too much
                    pressure
                    on me, wanting to deliver something <i>creative and big</i>. This time, I will start small
                    while trying to make this blog useful for me as well as others.
                </p>
            </div>
        </div>
    </article>
</main>

</body>
</html>
